{"version":3,"sources":["base.js","ga.js"],"names":["kx","ready","show","model","blog","Object","keys","forEach","key","kontext","bind","detail","style","addClass","document","querySelector","display","list","setTimeout","Prism","highlightAll","window","scroll","version","endpoint","cache","ajax","get","url","success","status","response","xhr","innerHTML","anchor","blogs","result","location","pathname","history","replaceState","href","click","event","add","target","this","id","attributes","value","preventDefault","state","pushState","replace","create","removeClass","fqdn","link","match","current","length","open","onpopstate","i","s","o","g","r","a","m","q","push","arguments","l","Date","createElement","getElementsByTagName","async","src","parentNode","insertBefore","ga"],"mappings":"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","file":"combined.min.js","sourcesContent":["/* jshint browser:true */\n/* global kx, kontext, Prism */\nkx.ready(function() {\n\t'use strict';\n\n\tvar version = 'v1',\n\t\tendpoint = '/api/' + version + '/blog',\n\t\tcache = {},\n\t\tlist, detail, blog;\n\n\tfunction show(model) {\n\t\tif (!blog) {\n\t\t\tblog = kontext.bind(model, detail);\n\t\t}\n\t\telse {\n\t\t\tObject.keys(model).forEach(function(key) {\n\t\t\t\tblog[key] = model[key];\n\t\t\t});\n\t\t}\n\n\t\tkx.style.addClass(document.querySelector('.site-header'), '-small');\n\n\t\tdetail.style.display = 'block';\n\t\tlist.style.display = 'none';\n\n\t\tsetTimeout(function() {\n\t\t\tPrism.highlightAll();\n\t\t}, 50);\n\n\t\twindow.scroll(0, 0);\n\t}\n\n\tkx.ajax.get({\n\t\turl: '/template/detail',\n\t\tsuccess: function(status, response, xhr) {\n\t\t\tdocument.querySelector('.site-content').innerHTML += response;\n\n\t\t\tlist = document.querySelector('.blog-list');\n\t\t\tdetail = document.querySelector('.blog-item.-detail');\n\n\t\t\tdetail.style.display = 'none';\n\n\t\t\tkx.ajax.get({\n\t\t\t\turl: endpoint,\n\t\t\t\tsuccess: function(status, response, xhr) {\n\t\t\t\t\tvar anchor;\n\n\t\t\t\t\tkontext.bind({blogs: response.result}, list);\n\n\t\t\t\t\tif (window.location.pathname !== '/' && (anchor = document.querySelector('a[href=\"' + window.location.pathname + '\"]')) === null) {\n\t\t\t\t\t\thistory.replaceState(null, '', '/');\n\t\t\t\t\t\twindow.location.href = '/404';\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tanchor.click();\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\tkx.event.add('.site-content', 'click', '.blog-item:not(.-detail) a', function(event) {\n\t\tvar target = this,\n\t\t\tid = target.attributes['data-id'].value;\n\n\t\tevent.preventDefault();\n\n\t\tif ((!history.state || ('id' in history.state && history.state.id !== id)) && window.location.pathname === '/') {\n\t\t\thistory.pushState({id: id}, 'test', target.href.replace(window.location.href, ''));\n\t\t}\n\n\t\tif (id in cache) {\n\t\t\treturn show(cache[id]);\n\t\t}\n\n\t\tkx.ajax.get({\n\t\t\turl: endpoint + '/' + id,\n\t\t\tsuccess: function(status, response, xhr) {\n\t\t\t\tcache[id] = Object.create(response.result);\n\n\t\t\t\tshow(response.result);\n\t\t\t}\n\t\t});\n\t});\n\n\tkx.event.add('.profile-block a', 'click', function(event) {\n\t\tevent.preventDefault();\n\n\t\tlist.style.display = 'block';\n\t\tdetail.style.display = 'none';\n\n\t\thistory.pushState(null, '', '/');\n\n\t\tkx.style.removeClass(document.querySelector('.site-header'), '-small');\n\t});\n\n\tkx.event.add('.site-content', 'click', '.blog-item.-detail a:not([target])', function(event) {\n\t\tvar fqdn    = /(?:[a-z]+:)?\\/\\/(?:[a-z0-9_-]+\\.)?([a-z][a-z0-9_-]+\\.[a-z]{2,6})(?:\\/.*)?|\\/.*|javascript:.*/i,\n\t\t\tlink    = this.href.match(fqdn),\n\t\t\tcurrent = window.location.href.match(fqdn);\n\n\t\tif (link && link.length > 1 && current && current.length > 1 && link[1] !== current[1] && window.open(this.href)) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t});\n\n\twindow.onpopstate = function(event) {\n\t\tif (!event.state || typeof event.state !== 'object' || !('id' in event.state)) {\n\t\t\tlist.style.display = 'block';\n\t\t\tdetail.style.display = 'none';\n\n\t\t\tkx.style.removeClass(document.querySelector('.site-header'), '-small');\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn document.querySelector('.blog-item a[data-id=\"' + event.state.id + '\"]').click();\n\t};\n});\n","(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\nga('create', 'UA-70511906-1', 'auto');\nga('set', 'anonymizeIp', true);\nga('send', 'pageview');\n"],"sourceRoot":"/source/"}