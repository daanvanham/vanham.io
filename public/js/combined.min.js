!function(e,t,n){"use strict";function r(){function e(){r=i.time()}function t(e){var t={array:function(e){return e.length>0},object:function(e){for(e in e)return!0;return!1},"boolean":function(e){return e},number:function(e){return 0!==e},string:function(e){return!/^0?$/.test(e)}},r=i.type(e);return n("function",t[r])&&t[r](e)?!1:!0}function n(e,t){var n=i.type(t),r=e&&e.length?n.substr(0,e.length):null;if(r!==e)switch(n){case"object":r=i.type(t,!0).substr(0,e.length);break;case"number":r=(parseInt(t,10)===t?"integer":"float").substr(0,e.length)}return r===e}var r,i=this,u=0;i.time=function(){return Date.now?Date.now():(new Date).getTime()},i.elapsed=function(){var e=864e5,t=36e5,n=6e4,o=Math.abs((new Date).getTime()-r),i=Math.floor(o/e),u=Math.floor((o-=i*e)/t),a=Math.floor((o-=u*t)/n),c=Math.floor((o-=a*n)/1e3),s=Math.floor(o-=1e3*c),f="000";return(i>0?i+"d ":"")+(f+u).substr(-2)+":"+(f+a).substr(-2)+":"+(f+c).substr(-2)+"."+(f+s).substr(-3)},i.unique=function(){return(++u+i.time()%864e5).toString(36)},i.combine=function(){var e,t,n={},r=arguments;for(e=0;e<r.length;++e)if(i.isType("object",r[e]))for(t in r[e])n[t]=t in n&&i.isType("object",n[t])?i.combine(r[e][t],n[t]):r[e][t];return n},i.empty=function(){for(var e=Array.prototype.slice.call(arguments);e.length;)if(!t(e.shift()))return!1;return!0},i.type=function(e,t){var n,r=e instanceof Array?"array":null===e?"null":typeof e;return t&&"object"===r&&(n=/(?:function\s+)?(.{1,})\(/i.exec(e.constructor.toString()),n&&n.length>1&&"Object"!==n[1])?n[1]:r},i.isType=n,i.version=function(e){for(var t=o.split(" - "),n=["version","date","revision","type"],r={};n.length&&t.length;)r[n.shift()]=t.shift();return e?r:r.version},i.deprecate=function(e,t,n){var r;return function(){var o,u=["info","warn","log"];if(!r)for(r=!0,o=0;o<u.length;++o)if(i.isType("function",console[u[o]])){console[u[o]](i.elapsed()+" DEPRECATED: "+e);break}return t.apply(n||null,arguments)}},i.register=function(e,t){var n=!1;return(i.isType("function",t)||i.isType("object",t))&&(n=e in i?i[e]:null,i[e]=t),n},e()}var o="1.0.0-alpha.59 - 2015-10-02 - 5203429";!function(n){t&&t(n),e.konflux=e.kx=n}(new r)}(window,function(e){function t(){function t(t){for(var n=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),r=["source","protocol","domain","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],o={};r.length;)o[r.shift()]=n.length?n.shift():"";return o.query&&o.query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,n,r){e.isType("object",o.query)&&(o.query={}),n&&(o.query[n]=r)}),o}var n=this;n.current=e.isType("undefined",window.location.href)?!1:t(window.location.href),n.parse=t,n.isLocal=function(e){return n.current.domain===n.parse(e).domain}}function n(){function t(t,n,r){"use strict";function o(){clearTimeout(u)}function i(){u=setTimeout(function(){a||(a=e.browser.feature("requestAnimationFrame")||function(e){setTimeout(e,16)}),a(o),t.call()},n)}var u,a,c=this;c.cancel=o,c.reference=function(){return r},i()}function n(e){"undefined"!=typeof i[e]&&(i[e].cancel(),delete i[e])}function r(r,o,u){return u?n(u):u=r.toString()||e.unique(),i[u]=new t(r,o||0,u),i[u]}var o=this,i={};o.remove=n,o.create=r}function r(){function t(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return!1}function n(e,n){var r,o=[];for(r=0;r<e.length;++r)t(n,e[r])===!1&&o.push(e[r]);return o}function r(e,t){var n=[];for(t-=e;n.length<=t;)n.push(e+n.length);return n}function o(e){for(var t,n,r=e.length;r;t=Math.random()*r|0,n=e[--r],e[r]=e[t],e[t]=n);return e}function i(t){var n,r,o=!1;switch(e.type(t)){case"object":if(!("length"in t)){o=[t];break}try{o=Array.prototype.slice.call(t)}catch(i){for(o=[],n=t.length,r=0;n>r;++r)o.push(t[r])}break;case"null":case"undefined":o=[];break;default:o=[t]}return o}var u=this;u.contains=t,u.diff=n,u.range=r,u.shuffle=o,u.cast=i}function o(){function t(e){for(var t=0,n=0,r=e.length;r>n;++n)t=(t=31*t+e.charCodeAt(n))&t;return t}function n(e){for(var n=16,r=("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"+e).substr(-(Math.ceil((e.length||1)/n)*n)),o=0;r.length;)o+=t(r.substr(0,n)),r=r.substr(n);return Math.abs(o).toString(36)}function r(e){return e.charCodeAt(0)}function o(e){return String.fromCharCode(e)}function i(e,t,n,r){return n=new Array(t+1).join(n),(t-=e.length)>0&&(r=r===f.PAD_LEFT?t:r===f.PAD_BOTH?Math.ceil(t/2):0)!==!1?(r>0?n.substr(0,r):"")+e+n.substr(0,t-r):e}function u(e){for(var t=e.length,n=0;t>0;--t)n+=t*r(e[t]);return Math.abs(n+""+e.length|0).toString(36)}function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function c(e,t,n){var r,o=""+e,i=[];if(t&&1!==t)if(e.length<t)i.push(e);else if(n)for(r=o.length;r>0;i.unshift(o.substr(r-=Math.min(o.length,t))),o)o=o.substring(0,r);else for(;o.length>0,i.push(o.substring(0,t)),o;)o=o.substr(t);else i=o.split("");return i}function s(t,n){var r,o,i,u=[];for(r=0;r<t.length;++r){i=t.substr(r,1);for(o in n)if(e.array.contains(n[o],i.charCodeAt(0))!==!1){i=o;break}u.push(i)}return u.join("")}var f=this;f.PAD_LEFT=1,f.PAD_BOTH=2,f.PAD_RIGHT=3,f.TRIM_LEFT=1,f.TRIM_BOTH=2,f.TRIM_RIGHT=3,f.CHUNK_START=1,f.CHUNK_END=2,f.ascii=function(e,t){return s(e,t||{A:[192,193,194,195,196,197],C:[199],E:[200,201,202,203],I:[204,205,206,207],D:[208],N:[209],O:[210,211,212,213,214,216],U:[217,218,219,220],Y:[221],ss:[223],a:[224,225,226,227,228,229],beta:[946],c:[231],e:[232,233,234,235],i:[236,237,238,239],n:[241],o:[240,242,243,244,245,246],u:[249,250,251,252],y:[253]})},f.trim=function(e,t,n){var r,o,i=t||" \n\r	\f";for(o=e.length;o>0&&n!==f.TRIM_LEFT&&i.indexOf(e.charAt(--o))>=0;);for(r=0;o>r&&n!==f.TRIM_RIGHT&&i.indexOf(e.charAt(r))>=0;++r);return e.substring(r,o+1)},f.reverse=function(e){for(var t=e.length,n="";t>0;--t)n+=e[t];return n},f.pad=function(e,t,n,r){return i(e,t,n||" ",r||f.PAD_RIGHT)},f.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},f.hash=n,f.checksum=u,f.uuid=a,f.ord=r,f.chr=o,f.chunk=function(e,t,n){return c(e,t||1,n===f.CHUNK_END)},f.escapeRegExp=function(t,n){var r=".\\+*?[^]$(){}=!<>|:-".split(""),o=new RegExp("["+r.concat(n?[n]:[]).join("\\")+"]","g");return e.isType("string",t)?t.replace(o,"\\$&"):""}}function i(e,t){var n=this;n.x=e||0,n.y=t||0,n.to=function(e,t){return n.x=e,n.y=t,n},n.snap=function(e){return n.x=e?Math.round(n.x/e)*e:Math.round(n.x),n.y=e?Math.round(n.y/e)*e:Math.round(n.y),n},n.clone=function(){return new i(n.x,n.y)},n.move=function(e,t){return n.x+=e,n.y+=t,n},n.equal=function(e,t){return t?Math.round(n.x)===Math.round(e.x)&&Math.round(n.y)===Math.round(e.y):n.x===e.x&&n.y===e.y},n.scale=function(e){return n.x*=e,n.y*=e,n},n.subtract=function(e){return new i(n.x-e.x,n.y-e.y)},n.add=function(e){return new i(n.x+e.x,n.y+e.y)},n.distance=function(e){return Math.sqrt(Math.pow(Math.abs(n.x-e.x),2)+Math.pow(Math.abs(n.y-e.y),2))},n.angle=function(e){return Math.atan2(e.x-n.x,e.y-n.y)},n.max=function(){var e,t=n.x,r=n.y;for(e=0;e<arguments.length;++e)t=Math.max(t,arguments[e].x),r=Math.max(r,arguments[e].y);return new i(t,r)},n.min=function(){var e,t=n.x,r=n.y;for(e=0;e<arguments.length;++e)t=Math.min(t,arguments[e].x),r=Math.min(r,arguments[e].y);return new i(t,r)},n.iso=function(e){return e=(e||30)*Math.PI/180,new i(n.x-n.y,(n.x+n.y)*e)},n.mid=function(e){return new i(.5*(n.x+e.x),.5*(n.y+e.y))}}function u(t){function n(){var e;t=t||[],"object"!=typeof t&&(t=[t]),"length"in t&&o("length");for(e in t)e in f||(f[e]=r(e));c=f.keys()}function r(n){return e.isType("function",t[n])?function(){return t[n].apply(t,e.array.cast(arguments))}:t[n]}function o(e){try{return Object.defineProperty(f,e,{get:function(){return t[e]}})}catch(n){return f[e]=t[e]}}function i(n){var r,i;if(!("length"in t))return!1;if(t instanceof Array||(t=e.array.cast(t)),n instanceof u&&(n=n.collection()),n instanceof Array||(n=e.isType("object",n)?[n]:e.array.cast(n)),n instanceof Array){for(r=t.length,t=t.concat(n),c=f.keys(),i=r;i<t.length;++i)o(i);return!0}return!1}function a(n,r,o){return function(i,a){var c,s,l,d;if(n in t&&e.isType("function",t[n]))return new u(t[n].apply(t,arguments));for(c=t instanceof Array?[]:{},l=f.keys(),d=0;d<l.length;++d)if(s=r(i.apply(a||void 0,[t[l[d]],l[d],t]),t[l[d]])){if(o)return s;c[l[d]]=s}return e.iterator(c)}}var c,s,f=this;f.collection=function(){return t},f.cursor=function(n){var r;return n&&(t instanceof Array&&n in c?s=n:t instanceof Array||(r=e.array.contains(c,n),r&&(s=r))),r=s||0,t instanceof Array?r:c[r]},f.item=function(n){return"item"in t&&e.isType("function",t.item)?t.item(n):"length"in t&&(n>=0||n<t.length)||n in t?t[n]:null},f.current=function(){return s||(s=0),"undefined"!=typeof c[s]?f.item(c[s]):!1},f.keys=function(){var e=[];return f.each(function(t,n){e.push(n)}),e},f.filter=a("filter",function(e,t){return e?t:!1}),f.find=a("find",function(e,t){return e?t:!1},!0),f.map=a("map",function(e){return e}),f.previous=function(){return s=Math.max("undefined"!=typeof s?s-1:0,-1),f.current()},f.prev=f.previous,f.next=function(){return s=Math.min("undefined"!=typeof s?s+1:0,c.length),f.current()},f.each=function(e,n){var r;if("length"in t)for(r=0;r<t.length;++r)e.apply(n||void 0,[t[r],r,f]);else for(r in t)e.apply(n||void 0,[t[r],r,f]);return f},f.add=function(){var e;for(e=0;e<arguments.length;++e)i(arguments[e]);return f},n()}function a(){function t(n,r){var o,i;if(e.isType("string",n)&&(n=document.querySelector(n)),r instanceof Array)for(o=[],i=0;i<r.length;++i)o.push(t(n,r[i]));else o=n.appendChild(r);return o}function n(e,t){if("contains"in e)return e.contains(t);for(;t!==e&&t;)t=t.parentNode;return!!t}function r(n,o){var i,u,a,c;switch(e.type(n)){case"array":for(u=[],c=0;c<n.length;++c)u.push(r(n[c]));break;case"object":i="tag"in n?n.tag:"name"in n?n.name:"div",u=/^[a-z]+[a-z0-9-]*$/i.test(i)?document.createElement(i):(o?o.querySelector(i):null)||document.querySelector(i);for(a in n)switch(a){case"name":"tag"in n&&u.setAttribute("name",n[a]);break;case"child":case"content":t(u,r(n[a],u));break;case"class":case"className":u.setAttribute("class",n[a]);break;default:u.setAttribute(a,n[a])}break;case"boolean":n=n?"true":"false";default:u=document.createTextNode(n)}return u}function o(t){var n=+e.style.get(t,"z-index"),r=parseFloat(e.style.get(t,"opacity")),o=e.style.get(t,"position"),i=e.style.get(t,"display"),a=e.style.get(t,"float"),c="static"!==o&&"auto"!==n||1>r,s=/^(?:(?:inline\-)?block|list\-item|table(?:\-(?:cell|caption|column|row))?|table\-(?:column|footer|header|row)\-group|flex|grid)$/.test(i),f=parseInt(["fixed"===o?1:0,c&&("auto"===n||n>=0)?1:0,"static"===o||c?0:1,"none"!==a||"static"!==o||s?0:1,"none"===a||c||"static"!==o?0:1,"none"===a&&"static"===o&&s?1:0,c&&0>n?1:0].join(""),2);return{type:f,index:"static"===o&&n&&"auto"!==n?n:0,context:0!==(u.STACK_NEGATIVE&f||u.STACK_POSITIONED&f||u.STACK_POSITIVE&f||u.STACK_GLOBAL&f)}}function i(t,n){var r,o,i="kxref",u={window:window,document:document,root:document.documentElement,head:document.head,body:document.body};for(o in u)if(t===u[o])return o;return t&&"nodeType"in t&&1===t.nodeType?(r=n?i in t?t[i]:null:t.getAttribute("data-"+i),r||(r=e.unique(),n?t[i]=r:t.setAttribute("data-"+i,r)),r):!1}var u=this;u.STACK_NEGATIVE=1,u.STACK_BLOCK=u.STACK_NEGATIVE<<1,u.STACK_FLOAT=u.STACK_BLOCK<<1,u.STACK_INLINE=u.STACK_FLOAT<<1,u.STACK_POSITIONED=u.STACK_INLINE<<1,u.STACK_POSITIVE=u.STACK_POSITIONED<<1,u.STACK_GLOBAL=u.STACK_POSITIVE<<1,u.create=r,u.appendTo=function(n,o){return t(n,e.isType("object",o)&&!e.isType("undefined",o.nodeType)?o:r(o,n))},u.contains=n,u.select=function(t,n){return e.iterator((n||document).querySelectorAll(t))},u.reference=function(e){return i(e)},u.stackLevel=o}function c(){function t(){for(var e=document.createElement("div"),t=e.getElementsByTagName("i"),n=4;e.innerHTML="<!--[if gt IE "+n+"]><i></i><![endif]-->",t.length&&10>n;)++n;return n=n>4?n:Function("/*@cc_on return document.documentMode;@*/return false")(),n?n:"-ms-ime-align"in document.documentElement.style?11:!1}function n(t){return e.isType("undefined",c[t])?t in window||t in document:c[t]}function r(t,n){var r,i,u=o(),a=n?n:[window,document,navigator],c=[];for(t instanceof Array||(t=[t]),i=0;i<t.length;++i)r=e.string.ucFirst(t[i]),c=c.concat([t[i],u+r,u.toLowerCase()+r]);for(;c.length;)for(t=c.shift(),i=0;i<a.length;++i)if(t in a[i])return a[i][t];return!1}function o(){var e,t=["Icab","Khtml","O","ms","Moz","webkit"],n=new RegExp("^("+t.join("|")+")(?=[A-Z])"),r=document.createElement("script");for(e in r.style)if(n.test(e)){i=e.match(n).shift();break}for(;!i&&t.length;)e=t.pop(),e+"Opacity"in r.style&&(i=e);return r=null,i}var i,u,a=this,c={touch:"ontouchstart"in window||"msMaxTouchPoints"in navigator};a.ie=function(n){return e.isType("undefined",u)&&(u=t()),n&&u?n>u:u},a.prefix=function(){return i||(i=o()),i},a.feature=function(e,t){return!t||t instanceof Array||(t=[t]),r(e,t)},a.supports=function(){for(var e=!0,t=arguments.length;e&&--t>=0;)e=e&&n(arguments[t]);return e},a.fullscreen=function(t){var n,r,o=["fullScreen","isFullScreen"],i=a.prefix().toLowerCase();for(t||(t=document.documentElement),r=0,n=null;r<o.length,null===n;++r)n=o[r]in document?o[r]:i+e.string.ucFirst(o[r]),n in document||(n=null);i=n.match(new RegExp("^"+i))?i:null,i=(i||(document[n]?"cancel":"request"))+e.string.ucFirst((i?document[n]?"cancel":"request":"")+e.string.ucFirst(o[0])),(document[n]?document:t)[i](t.ALLOW_KEYBOARD_INPUT||null)}}function s(){function t(t){"use strict";function n(e){var t=e?e.match(/^([^\.]*)?(?:\.(.+))?$/):["","*","*"];return{name:t[1]||"*",namespace:t[2]||"*"}}function r(t){return e.dom.reference(t)}function o(e){return(e+"").replace(/\s+|\/\*.*?\*\//g,"")}function i(n,i,u,a,c,l){var d=[r(n),i,u,a?o(a):!1,l||!1,o(c)].join(s);return d in f||(f[d]={target:n,namespace:i,type:u,filter:a,capture:l||!1,delegate:function(r){var o,i=r||window.event;a?(!("target"in i)&&"srcElement"in i&&(i.target=i.srcElement),e.select(a,n).each(function(r){(i.target===r||e.dom.contains(r,i.target))&&(i.delegate=n,o=c.apply(r,[t(i)]))})):c&&(o=c.apply(n,[t(i)])),o===!1&&(i.stopPropagation?i.stopPropagation():i.cancelBubble&&(i.cancelBubble=!0))}}),f[d]}function u(e){e in f&&delete f[e]}function a(t,n,i,u,a){var c,l=".*?",d=new RegExp(["^"+(t?e.string.escapeRegExp(r(t)):l),n&&"*"!==n?e.string.escapeRegExp(n):l,i&&"*"!==i?e.string.escapeRegExp(i):l,u?e.string.escapeRegExp(o(u)):l,l,(a?e.string.escapeRegExp(o(a)):l)+"$"].join(s)),p={};for(c in f)d.test(c)&&(p[c]=f[c]);return p}var c=this,s="!",f={};c.find=function(e,t,r,o){var i,u=n(t),c=a(e,u.namespace,u.name,r,o),s=[];for(i in c)s.push(c[i]);return s},c.remove=function(e,t,r,o){var i,c=n(t),s=a(e,c.namespace,c.name,r,o),f=[];for(i in s)f.push(s[i]),u(i);return f},c.create=function(e,t,r,o,u){var a=n(t);return i(e,a.namespace,a.name,r,o,u||!1)}}function n(e){var t,r=!1;if(document.removeEventListener?(document.removeEventListener("DOMContentLoaded",n,!1),window.removeEventListener("load",n,!1),r=!0):"complete"===document.readyState&&(document.detachEvent("onreadystate",n),window.detachEvent("onload",n),r=!0),r&&y.ready)for(t in y.ready)y.ready[t].call(e)}function r(t,n){var r,o=t.match(/^(transition|animation)(end|iteration|start)$/i);return o&&(r=e.style.property(o[1],n))!==o[1]&&(r=r.substr(0,r.length-o[1].length),t=r["to"+(r.length<=2?"Upper":"Lower")+"Case"]()+e.string.ucFirst(o[1])+e.string.ucFirst(o[2])),t}function o(e){var t,n="!afterprint!beforeprint!canplay!canplaythrough!change!domcontentloaded!durationchange!emptied!ended!input!invalid!loadeddata!loadedmetadata!offline!online!pause!play!playing!ratechange!readystatechange!reset!seeked!seeking!stalled!submit!suspend!timeupdate!volumechange!waiting!abort!domactivate!error!load!resize!scroll!select!unload!animationend!animationiteration!animationstart!beforeunload!blur!domfocusin!domfocusout!focus!focusin!focusout!click!contextmenu!dblclick!mousedown!mouseenter!mouseleave!mousemove!mouseout!mouseover!mouseup!show!compositionend!compositionstart!compositionupdate!copy!cut!paste!drag!dragend!dragenter!dragleave!dragover!dragstart!drop!hashchange!keydown!keypress!keyup!pagehide!pageshow!popstate!touchcancel!touchend!touchmove!touchstart!transitionend!wheel!",r=n.indexOf("!"+e.toLowerCase()+"!");return 0>r?t="Custom":277>r?t="HTML":334>r?t="UI":381>r?t="Animation":394>r?t="BeforeUnload":445>r?t="Focus":546>r?t="Mouse":596>r?t="Composition":611>r?t="Clipboard":668>r?t="Drag":679>r?t="HashChange":702>r?t="Keyboard":720>r?t="PageTransition":729>r?t="PopState":771>r?t="Touch":777>r?t="Transition":786>r&&(t="Wheel"),t+"Event"}function i(t,n){return"__kxevt_"+n+"_"+e.dom.reference(t)}function u(t){var n=t||window.event;return e.isType("undefined",n.target)&&(n.target=e.isType("undefined",n.srcElement)?null:n.srcElement),e.isType("undefined",n.type)&&(n.type=n.eventType),n.family=o(n.type),/^(mouse[a-z]+|drag(?:[a-z]+)?|drop|(?:dbl)?click)$/i.test(n.type)&&(n.mouse=e.point(n.pageX?n.pageX:n.clientX?n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft:0,n.pageY?n.pageY:n.clientY?n.clientY+document.body.scrollTop+document.documentElement.scrollTop:0)),n}function a(t){return t||(t=[]),t===window&&(t=[t]),e.isType("string",t)&&(t=document.querySelectorAll(t)),e.isType("number",t.length)||(t=[t]),e.iterator(t)}function c(t){return e.isType("string",t)?t=t.replace(/\*/g,"").split(/[\s*,]+/):t||(t=[]),e.iterator(t)}function s(e,n,r,o,i){h||(h=new t(u)),n=c(n),a(e).each(function(e){n.each(function(t){var n=h.create(e,t,r,o,i||r?!0:!1);l(n.target,n.type,n.delegate,n.capture)})})}function f(e,t,n,r){var o,i=[];if(h&&(e?a(e).each(function(e){t?c(t).each(function(t){i=i.concat(h.find(e,t,n,r))}):i=i.concat(h.find(e,null,null,r))}):i=i.concat(h.find(null,null,null,r)),i.length>0)){for(o=0;o<i.length;++o)d(i[o].target,i[o].type,i[o].delegate,i[o].capture),h.remove(i[o].target,i[o].type,n,r);return!0}return!1}function l(t,n,u,a){var c;if(t.addEventListener)t.addEventListener(r(n),u,a);else if(t.attachEvent)switch(o(n)){case"CustomEvent":c=i(t,n),c in t||Object.defineProperty(t,c,{configurable:!0,enumerable:!1,get:function(){return n},set:function(t){var r,o="on"+n;if(o in this||(this[o]=[]),e.isType("function",t))this[o].push(t);else for(t.returnValue=!0,t.srcElement=this,r=0;r<this[o].length&&(this[o][r].apply(this,[t]),t.returnValue);++r);}}),t[c]=u;break;default:t.attachEvent("on"+n,u)}}function d(e,t,n,u){if(e.removeEventListener)e.removeEventListener(r(t),n,u);else if(e.detachEvent)switch(o(t)){case"CustomEvent":delete e[i(e,t)];break;default:e.detachEvent("on"+t,n)}}function p(t,n,r){var u,c=o(n)||"CustomEvent",s=e.browser.feature(c),f=r||{},l=!1;return s&&e.isType("function",s)?l=new s(n,{detail:f,cancelable:!0}):"createEvent"in document?(l=document.createEvent(c),r||"CustomEvent"===c?l.initCustomEvent(n,!1,!0,f):l.initEvent(n,!1,!0)):"createEventObject"in document&&(l=document.createEventObject(),l.eventType=n,l.detail=f),l?(a(t).each(function(t){"dispatchEvent"in t?t.dispatchEvent(l):"fireEvent"in t&&("CustomEvent"===c?(u=i(t,n),e.isType("undefined",t[u])||(t[u]=l)):t.fireEvent("on"+n,l))}),!0):!1}var h,g,m=this,y={};m.add=function(t,n,r,o,i){return setTimeout(function(){s.apply(m,[t,n].concat(e.isType("function",r)?[null,r,o]:[r,o,i]))},1),m},m.remove=function(t,n,r,o){var i=[t,n,r,o];return e.isType("function",t)?i=[null,null,null,t]:e.isType("function",n)?i=[t,null,null,n]:e.isType("function",r)&&(i=[t,n,null,r]),f.apply(m,i),m},m.trigger=function(e,t,n){return p(e,t,n)},m.hasTouch=function(){return e.isType("boolean",g)||(g=e.browser.supports("touch")),g},m.ready=function(e){return/^interactive|complete$/.test(document.readyState)?(setTimeout(e,1),!0):("undefined"==typeof y.ready&&(y.ready=[],document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):(document.attachEvent("onreadystatechange",n),window.attachEvent("onload",n))),y.ready.push(e),!1)},m.listen=e.deprecate("konflux.event.listen is deprecated, use konflux.event.add instead (a drop-in replacement)",m.add),m.live=e.deprecate("konflux.event.live is deprecated, use konflux.event.add instead (a drop-in replacement)",m.add)}function f(){function t(e){var t=0;if("float"===e)return"cssFloat";for(;(t=e.indexOf("-",t))>=0;)e=e.substr(0,t)+e.charAt(++t).toUpperCase()+e.substring(t+1);return e}function n(e){return"cssFloat"===e&&(e="float"),e.replace(/([A-Z])/g,"-$1").toLowerCase()}function r(n,r){return n=t(n),r=r||document.body,n in r.style?n:(n=e.browser.prefix()+e.string.ucFirst(n),n in r.style?n:!1)}function o(){var t,n=document.styleSheets,r=[];for(t=0;t<n.length;++t)e.url.isLocal(n[t].href)&&r.push(n[t]);return r}function i(e,t){var n,r=t?document.styleSheets:o(),i=[];switch(e){case"first":r.length>0&&(i=[r[0]]);break;case"last":r.length>0&&(i=[r[r.length-1]]);break;default:if("all"===e)i=r;else if(e){if(r.length>0)for(n=0;n<r.length;++n)r[n].href&&r[n].href.substr(-e.length)===e?i.push(r[n]):r[n].title&&r[n].title===e&&i.push(r[n])}else i=!1}return i}function u(e,t){var n=i(e,!0);return t&&0===n.length&&(n=i(t,!0)),n.length>0?n[0]:!1}function a(t,n,r){var o=u(t,r),i=document.head||document.getElementsByTagName("head")[0];return o||(o=document.createElement(t?"link":"style"),o.setAttribute("type","text/css"),o.setAttribute("title",r||"konflux.style."+e.unique()),/link/i.test(o.nodeName)&&(o.setAttribute("rel","stylesheet"),o.setAttribute("href",t)),n&&document.head.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o)),o}function c(e){var n,r,o=e.split(/\s*;\s*/),i={};for(n=0;n<o.length;++n)r=o[n].split(/\s*:\s*/),""!==r[0]&&(i[t(r.shift())]=f(r.join(":")));return i}function s(e){return e.split(/\s+/).join(" ").toLowerCase()}function f(t){var n,r={" ":/\s+/g,'"':/["']/g,",":/\s*,\s*/g,".":/\b0+\./g,0:/0(?:px|em|%|pt)\b/g};for(n in r)t=t.replace(r[n],n);return r=t.match(/#([0-9a-f]+)/),r&&r.length>0&&(r=r[1],r.length%3!==0?r=e.string.pad(r,6,"0"):3===r.length&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]),t="rgb("+[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)].join(",")+")"),t}var l=this;l.addClass=function(t,n){var r=e.string.trim(t.className).split(/\s+/);return t.className=r.concat(e.array.diff(n.split(/[,\s]+/),r)).join(" "),t.className},l.removeClass=function(t,n){var r,o,i=e.string.trim(t.className).split(/\s+/),u=e.string.trim(n).split(/[,\s]+/);for(r=0;r<u.length;++r)o=e.array.contains(i,u[r]),o!==!1&&i.splice(o,1);return t.className=i.join(" "),t.className},l.toggleClass=function(t,n){var r,o,i=e.string.trim(t.className).split(/\s+/),u=e.string.trim(n).split(/[,\s]+/);for(r=0;r<u.length;++r)o=e.array.contains(i,u[r]),o!==!1?i.splice(o,1):i.push(u[r]);return t.className=i.join(" "),t.className},l.inline=function(e,t){var n,o;for(n in t)o=r(n),o&&(e.style[o]=t[n]);return l},l.selector=function(t,n){var r=t.nodeName.toLowerCase(),o=t.hasAttribute("id")?"#"+t.getAttribute("id"):null,i=t.hasAttribute("class")?"."+e.string.trim(t.getAttribute("class")).split(/\s+/).join("."):null,u="";return(1===arguments.length||o||i)&&(u=(n?"":r)+(o||i||"")),e.string.trim((!o&&t.parentNode&&t!==document.body?l.selector(t.parentNode,!0)+" ":"")+u)},l.sheet=function(t,n){var r,o=i(e.isType("string",t)?t:null,n===!1?!0:!1);if(e.isType("undefined",t.nodeName))for(r=0;r<o.length;++r)if(o[r].ownerNode===t)return[o[r]];return o},l.create=function(e,t){var n=a(!1,t,e);return n.sheet||!1},l.load=function(t,n,r){var o=a(t,r);return e.isType("undefined",o.ownerNode)?(o=o.ownerNode,n&&setTimeout(function(){n.apply(o,[o])},1)):n&&e.event.add(o,"load",function(e){n.apply(o,[e])}),o},l.isEditable=function(t){var n,r=o(),i=e.isType("undefined",t.ownerNode)?t.ownerNode:t;for(n=0;n<r.length;++n)if(r[n].ownerNode===i)return!0;return!1},l.add=function(t,o,u,s){var d,p,h,g="";if(e.isType("object",t)&&"nodeType"in t&&(t=l.selector(t,s)||l.selector(t)),e.isType("string",o)&&(o=c(o)),!e.isType("object",o))return!1;if((!u||e.isType("string",u))&&(u=i(u||"last")),u instanceof Array)if(1===u.length)u=u[0];else{if(!(u.length<=0)){for(g=!0,p=0;p<u.length;++p)g=g&&l.add(t,o,u[p]);return g}u=a().sheet}d=l.find(t,u);for(p in o)p in d&&f(d[p])===f(o[p])||(h=r(p),h&&(g+=(""!==g?";":"")+n(h)+":"+o[p]));return u.addRule?u.addRule(t,g):u.insertRule?u.insertRule(t+"{"+g+"}",u.cssRules.length):!1},l.find=function(t,n){var r,o,u,a={};for(t&&(t=s(t)),n?n instanceof Array||(n=[n]):n=i(),o=0;o<n.length;++o)if(r=e.type(n[o].cssRules)?n[o].cssRules:n[o].rules,r&&r.length)for(u=0;u<r.length;++u)"selectorText"in r[u]&&(!t||s(r[u].selectorText)===t)&&(a=e.combine(a,c(r[u].style.cssText)));return a},l.get=function(e,o,i){var u;return o=r(o),o&&(window.getComputedStyle?u=document.defaultView.getComputedStyle(e,i||null).getPropertyValue(n(o)):e.currentStyle&&(u=e.currentStyle(t(o)))),u},l.property=r,l.specificity=function(t){var n,r=[0,0,0,0],o=e.string.trim(t.replace(/([#\.\:\[]+)/g," $1")).split(/[^a-z0-9\.\[\]'":\*\.#=_-]+/);for(n=0;n<o.length;++n)++r[/^#/.test(o[n])?1:/^(?:\.|\[|:[^:])/.test(o[n])?2:3];return r.join(".")}}function l(){function t(e){var t,n,r,o,i,u=e?e.match(l):!1;if(u){for(n=parseInt(u[1],10),r=parseInt(u[2],10),o=u[3],e="",i=0;n>i;++i){if(t=f.getItem(o+i),null===t)return!1;e+=t}if(!e||e.length!==r)return!1}return e}function n(e,t){var n,r="__"+e,o=Math.ceil(t.length/s);for(n=0;o>n;++n)f.setItem(r+n,t.substring(n*s,Math.min((n+1)*s,t.length)));f.setItem(e,"[fragment:"+o+","+t.length+","+r+"]")}function r(e){var t,n=parseInt(e[1],10),r=e[3];for(t=0;n>t;++t)a(r+t)}function o(){var e,t,n=null;if(f)for(n={},e=0;e<f.length;++e)t=f.key(e),n[t]=i(t);return n}function i(n){var r=f?f.getItem(n):!1;return r&&r.match(l)&&(r=t(r)),r&&r.match(/^[a-z0-9]+:.*$/i)&&(r=/([a-z0-9]+):(.*)/i.exec(r),r.length>2&&r[1]===e.string.checksum(r[2]))?JSON.parse(r[2]):r?r:!1}function u(t,r){return r=JSON.stringify(r),r=e.string.checksum(r)+":"+r,f?r.length>s?n(t,r):f.setItem(t,r):!1}function a(e){var t,n;return f?(t=f.getItem(e),t&&(n=t.match(l))&&r(n),f.removeItem(e)):!1}var c=this,s=2048,f=e.isType("undefined",window.localStorage)?window.localStorage:!1,l=/^\[fragment:([0-9]+),([0-9]+),([a-z0-9_]+)\]$/;c.get=function(e){return e?i(e):o()},c.set=u,c.remove=a,c.length=function(){return f?f.length:!1},c.keys=function(){var e,t=o(),n=[];for(e in t)n.push(e);return n},c.flush=function(){var e,t=c.keys();for(e=0;e<t.length;++e)a(t[e])},c.size=function(){return decodeURI(encodeURIComponent(JSON.stringify(localStorage))).length}}function d(){function t(t,n,r){"use strict";var i=this;i.type=t,i.reference=r,i.timeStamp=e.time(),i.timeDelta=e.elapsed(),i.unsubscribe=function(){return o(t,n)},i.stop=function(){f[r]=!1}}function n(e){"undefined"==typeof s[e]&&(s[e]=[])}function r(e,t){return n(e),s[e].push(t)}function o(e,t){var n;for(n=0;n<s[e].length;++n)s[e][n]===t&&(s[e][n]=!1)}function i(e,t){var r,o=[],i=[];for(n(e),r=0;r<s[e].length;++r)(s[e][r]&&s[e][r]!==t?i:o).push(s[e][r]);return s[e]=i,o}function u(t){var n=!1;return e.isType("undefined",s[t])&&(n=s[t],delete s[t]),n}function a(n){for(var r,o,i=e.array.cast(arguments),u=e.unique(),a=n.split("."),c=!1;a.length>=0;){if(f[u]=!0,r=a.join(".")+(c?(a.length?".":"")+"*":""),c=!0,"undefined"!=typeof s[r])for(o=0;o<s[r].length&&f[u];++o)s[r][o]&&(i[0]=new t(n,s[r][o],u),s[r][o].apply(s[r][o],i));if(!a.pop())break}delete f[u]}var c=this,s={},f={};c.subscribe=function(e,t,n){var o,i=e.split(/[\s,]+/),u=!0;for(o=0;o<i.length;++o)u=(r(i[o],t)?!0:!1)&&u;return n&&n.apply(c,[u]),c},c.unsubscribe=function(e,t,n){var r,o=e.split(/[\s,]+/),a=[];for(r=0;r<o.length;++r)a=a.concat(t?i(o[r],t):u(o[r]));return n&&n.apply(c,[a]),c},c.notify=function(){var t,n=e.array.cast(arguments),r=n.shift().split(/[\s,]+/);for(t=0;t<r.length;++t)a.apply(c,[r[t]].concat(n))}}function p(){var t=this;t.even=function(e){return e=+e,(0|e)===e&&e%2===0},t.odd=function(e){return e=+e,(0|e)===e&&!t.even(e)},t.between=function(e,t,n){return e=+e,t=+t,n=+n,e>=Math.min(t,n)&&e<=Math.max(t,n)},t.format=function(t,n,r,o){var i=n?Math.pow(10,n):0;return r=e.isType("undefined",r)?".":r,o=!e.isType("undefined",o)||arguments.length<3?o:",",t=+(""+t).replace(/[,\.]+/,"."),t=i>0?Math.round(t*i)/i:t,t=(""+(isFinite(t)?+t:0)).split("."),t[0].length>3&&o&&""!==o&&(t[0]=e.string.chunk(t[0],3,e.string.CHUNK_END).join(o)),t[0]+(n>0?r+e.string.pad(t[1]||"",n,"0",e.string.PAD_RIGHT):"")}}function h(){function t(){"use strict";var n=this,r={};n.append=function(t,o){return e.isType("object",o)&&(r[t]=o),n},n.serialize=function(){var e,t=[];for(e in r)t.push(e+"="+encodeURIComponent(r[e]));return t.join("&")},t.toString=function(){return n.serialize()}}function n(t){return l||(l={"X-Konflux":"konflux/"+e.string.ascii(e.version())}),e.url.isLocal(t)?l:{}}function r(){var t=new XMLHttpRequest;return t.__kxref=e.unique(),t}function o(t){var o,u="url"in t?t.url:e.url?e.url.path:null,c="type"in t?t.type.toUpperCase():"GET",s="data"in t?a(t.data):"",f="async"in t?t.async:!0,l="header"in t?combine(t.header,n(u)):n(u),d=r();if(/^(POST|PUT)$/.test(c)||(u+="data"in t&&""!==t.data?"?"+("string"==typeof t.data?t.data:s):"",s=null),d.onload=i(d,t,c),"progress"in t&&e.isType("function",t.progress)&&e.event.add(d.upload,"progress",t.progress),"error"in t&&e.isType("function",t.error)&&e.event.add(d,"error",t.error),"abort"in t&&e.isType("function",t.abort)&&e.event.add(d,"abort",t.abort),d.open(c,u,f),l)for(o in l)d.setRequestHeader(o,l[o]);return d.send(s),d}function i(t,n,r){return function(){var o=Math.floor(.01*this.status),i=!1;++f[r],2===o&&"success"in n?(i="success",n.success.apply(this,u(this))):o>=4&&"error"in n&&(i="error",n.error.apply(this,u(this))),"complete"in n&&(i=i?i:"complete",n.complete.apply(this,[this.status,this.statusText,this])),i&&e.observer.notify("konflux.ajax."+r.toLowerCase()+"."+i,t,n)}}function u(e){var t,n=e.getResponseHeader("content-type"),r=[e.status,e.responseText,e];switch(n&&(t=n.match(/([^;]+)/))&&(n=t[1]),n){case"application/json":r[1]=JSON.parse(r[1])}return r}function a(n,r,o){var i,u=o||("undefined"!=typeof FormData?new FormData:new t);if("undefined"!=typeof File&&n instanceof File)u.append(r,n,n.name);else if("undefined"!=typeof Blob&&n instanceof Blob)u.append(r,n,"blob");else if(n instanceof Array||"undefined"!==FileList&&n instanceof FileList)for(i=0;i<n.length;++i)a(n[i],(r||"")+"["+i+"]",u);else if(e.isType("object",n))for(i in n)a(n[i],r?r+"["+encodeURIComponent(i)+"]":encodeURIComponent(i),u);else u.append(r,n);return u}function c(t){var n=function(n){switch(e.type(n)){case"object":n.type=t;break;case"string":n={url:n,type:t};break;default:n={type:t}}return o(n)};return f[t.toUpperCase()]=0,e.observer.subscribe("konflux.ajax."+t.toLowerCase(),function(e,t){n(t)}),n}var s=this,f={},l=!1;s.request=o,s.get=c("GET"),s.post=c("POST"),s.put=c("PUT"),s.del=c("DELETE"),s.purge=c("PURGE")}e.register("url",new t),e.register("timing",new n),e.register("array",new r),e.register("string",new o),e.register("point",function(e,t){return new i(e,t)}),e.register("iterator",function(e){return e instanceof u?e:new u(e)}),function(t){e.register("dom",t),e.register("select",function(e,n){return t.select(e,n)})}(new a),e.register("browser",new c),e.register("event",new s),e.register("ready",function(t){return"event"in e?e.event.ready(t):!1}),e.register("style",new f),e.register("storage",new l),e.register("observer",new d),e.register("number",new p),e.register("ajax",new h)}),kx.ready(function(){"use strict";var e,t,n,r="v1",o="/api/"+r+"/blog",i=function(e,t,n){console.error(e,t)};kx.event.add(".site-content","click",".blog-item a",function(r){var u=this,a=u.attributes["data-id"].value;return r.preventDefault(),(!history.state||"id"in history.state&&history.state.id!==a)&&history.pushState({id:a},"test",u.href.replace(window.location.href,"")),kx.ajax.get({url:o+"/"+a,success:function(r,o,i){n?Object.keys(o.result).forEach(function(e){
n[e]=o.result[e]}):n=kontext.bind(o.result,t),kx.style.addClass(document.querySelector(".site-header"),"-small"),t.style.display="block",e.style.display="none",window.scroll(0,0)},error:i}),!1}),kx.ajax.get({url:"/template/detail",success:function(n,r,u){document.querySelector(".site-content").innerHTML+=r,e=document.querySelector(".blog-list"),t=document.querySelector(".blog-item.-detail"),t.style.display="none",kx.ajax.get({url:o,success:function(t,n,r){var o;kontext.bind({blogs:n.result},e),"/"!==window.location.pathname&&null===(o=document.querySelector('a[href="'+window.location.pathname+'"]'))&&(history.replaceState(null,"","/"),window.location.href="/404"),o&&(o.click(),e.style.display="none")},error:i})},error:function(e,t,n){}}),window.onpopstate=function(n){return n.state&&"object"==typeof n.state&&"id"in n.state?document.querySelector('.blog-item a[data-id="'+n.state.id+'"]').click():(e.style.display="block",t.style.display="none",kx.style.removeClass(document.querySelector(".site-header"),"-small"),!0)},kontext.extension("html",function(e,t,n){var r=e.appendChild(document.createElement("div"));t.delegation(n).on("update",function(e){r.innerHTML=e[n]}),r.innerHTML=t[n]})}),function(e,t,n,r,o,i,u){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),u=t.getElementsByTagName(n)[0],i.async=1,i.src=r,u.parentNode.insertBefore(i,u)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-70511906-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),!function(e){"use strict";function t(){function e(){["_","public"].forEach(n)}function t(e,n){return Object.keys(n).forEach(function(r){"object"==typeof n[r]&&n[r]?e[r]=t("object"==typeof e[r]?e[r]:{},n[r]):e[r]=n[r]}),e}function n(e){var n={};r[e]=function(e,r){return"string"==typeof e?(arguments.length>1&&(n[e]=r),n[e]):("object"==typeof e&&t(n,e),n)}}var r=this;r.combine=function(e){return t(t({},r["public"]()),e||{})},e()}function n(){function e(t,n,r){setTimeout(function(){return t.length&&t.shift().apply(null,n)!==!1?e(t,n,r):void r()},0)}var t=this,n=[];t.add=function(e,t,r){return n.push({type:e,handle:t,invoke:r||1/0}),t},t.remove=function(e,t){var r=[];return n=n.filter(function(n){return e&&n.type!==e||t&&n.handle!==t?!0:(r.push(n.handle),!1)}),r},t.list=function(e){return n.filter(function(t){return!e||"*"===e||t.type===e})},t.trigger=function(n,r,o){var i=t.list(n).map(function(e){return--e.invoke<=0&&t.remove(n,e.handle),e.invoke>=0?e.handle:!1}).filter(function(e){return"function"==typeof e});arguments.length<3&&"function"==typeof arguments[arguments.length-1]&&(o=r,r=[]),e(i,r instanceof Array?r:[r],function(){o&&o()})}}function r(){function t(){var t=e.MutationObserver||e.webkitMutationObserver||!1;t&&(o={observer:t,config:{characterData:!0,characterDataOldValue:!0}})}function n(e,t){var n=typeof e;switch(n){case"boolean":return!!t;case"number":return+t}return t}function r(e,t){var r=e(),o=n(r,t);o!==r&&e(o)}var o,i=this;i.monitor=function(e,t){o?new o.observer(function(e){e.forEach(function(e){r(t,e.target.nodeValue)})}).observe(e,o.config):e.addEventListener&&e.addEventListener("DOMCharacterDataModified",function(e){r(t,e.newValue)})},t()}function o(){function e(e){var t,n,r=[];if(3===e.nodeType)r.push(e);else for(t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);n=t.nextNode();)r.push(n);return r}function t(e){var n=e.nodeValue.match(/(\{\$?[a-z0-9_-]+(?::[^\}]+)?\})/i),r=n?0===n.index?e:e.splitText(n.index):null,o=n?r.splitText(n[1].length):null,i=[];return r&&(i.push(r),r.original=r.nodeValue),o&&(i=i.concat(t(o))),i}function n(n){var r=[];return e(n).forEach(function(e){r=r.concat(t(e))}),r}var r=this;r.placeholders=function(e,t){n(e).forEach(t)}}function i(){function e(){function t(e){return f.indexOf(e)>=0}function n(e,n){var r=l;return n||!t(e)&&!d.noquote.test(e)||(r=""),r+e+r}function r(e){return d.trailer.test(e)?r(e.substr(0,e.length-1)):e}function o(e,t){for(var r,o=[];t.length;)if(r=t.shift(),"\\"!==r[r.length-1]){if(r===e)break;o.push(r)}else d.escape.test(t[0])||(r=r.substr(0,r.length-1)),o.push(r),o.push(t.shift());return n(o.join(""))}function i(e){for(var t="";e.length;)t=u(t,e);return t}function u(e,t){var i=t.shift();switch(i){case" ":break;case"}":case"]":e=r(e)+i;break;case'"':case"'":e+=o(i,t);break;default:e+=n(i,":"===t[0])}return e}function a(e){var n,r=[];for(n=0;n<e.length;++n)0===r.length||t(e[n])||t(r[r.length-1])?r.push(e[n]):r[r.length-1]+=e[n];return r}function c(e,t){var n=":"===t?"{}":"[]",o=e.indexOf(t),i=2===(e.match(/"/g)||[]).length&&e.indexOf('"')<o&&e.lastIndexOf('"')>o;return i||e[0]===n[0]?e:n[0]+r(e)+n[1]}if("undefined"!=typeof e.prototype.__instance||!(this instanceof e))return e.prototype.__instance||new e;e.prototype.__instance=this;var s=this,f="'\":,{}[] ",l='"',d={escape:/["\\\/\b\f\n\r\t]/,noquote:/^(?:true|false|null|-?[0-9]+(?:\.[0-9]+)?)$/i,trailer:/[,]+$/};s.prepare=function(e){return"string"!=typeof e?"":i(a(e)).replace(/^.*?([:,]).*$/,c)},s.parse=function(e){var t=s.prepare(e);return t?JSON.parse(t):null}}function t(){r=new e}function n(e,t){var n,r,o=[];switch(t.nodeType){case 1:t.hasAttribute(e)&&o.push(t);case 9:case 11:for(n=t.querySelectorAll("["+e+"]"),r=0;r<n.length;++r)o.push(n[r])}return o}var r,o=this;o.find=function(e,t,o){n(e,t).forEach(function(t){o(t,r.parse(t.getAttribute(e)))})},t()}function u(){function u(){return a()?(w._({rAF:e.requestAnimationFrame||function(e){setTimeout(e,1e3/60)}}),w["public"]({greedy:!0,attribute:"data-kontext"}),T.add("ready",function(e){w._("ready",e||!0)},1),void document.addEventListener("DOMContentLoaded",function(){T.trigger("ready",[void 0,x])},!1)):setTimeout(function(){T.trigger("ready",["Unsupported browser"])},0)}function a(){var e=!0;return e=e&&"addEventListener"in document,e=e&&"defineProperties"in Object,e=e&&"getOwnPropertyDescriptor"in Object}function c(e,t){Object.keys(e).forEach(function(n,r){t(n,e[n],r)})}function s(e){return Array.prototype.slice.call(e)}function f(e,t,n,r,o){var i={enumerable:n};"boolean"==typeof o?(i.writable=o,i.value=r):(i.get=r,i.set=o),Object.defineProperty(e,t,i)}function l(e,t){var n=w._("extension")||{};return t&&(n[e]=t,w._("extension",n)),e in n?n[e]:function(){console.error('Kontext: Unknown extension "'+e+'"')}}function d(e){var t=new n;return f(e,"on",!0,t.add,!1),f(e,"off",!0,t.remove,!1),"object"==typeof e&&e.on("update",function(){T.trigger("update",s(arguments))}),t}function p(e,t){var n=""+t();e.filter(function(e){return n!==e.nodeValue}).forEach(function(e){e.nodeValue=n})}function h(e){var t;return"on"in e&&"off"in e||(c(e,function(n,r){var o;v(e,n)||(o=m(r,e,n),f(e,n,!0,o,o),o.on("update",function(){t.trigger("update",[e,n,r,e[n]])})),!r||"object"!=typeof r||r instanceof Array||(h(r),r.on("update",function(r,o,i,u){t.trigger("update",[e,n+"."+o,i,u])}))}),t=d(e),f(e,"delegation",!0,function(t){return v(e,t)},!1)),e}function g(e,t){e.forEach(function(n,r){"object"==typeof e[r]&&(e[r]=h(n,t.model,t.key),e[r].on("update",function(){t.emission.trigger("update",[t.model,t.key,t.value])}))})}function m(e,t,n){var r=function(e){var t=arguments.length>0;return t&&(o.value=e),o.emission.trigger(t?"update":"access",[o.model,o.key,o.value,e]),o.value},o={emission:d(r),element:[],value:e,model:t,key:n};return e instanceof Array&&(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"].forEach(function(t){var n;"function"==typeof e[t]&&(n=e[t],e[t]=function(){var t=n.apply(e,arguments);return g(e,o),o.emission.trigger("update",[o.model,o.key,o.value]),t})}),g(e,o)),r.scope=function(){!t&&arguments.length>0&&(t=arguments[0]),!n&&arguments.length>1&&(n=arguments[1])},r.element=function(){var e=s(arguments);return e.forEach(function(e){E.monitor(e,r)}),p(e,r),o.element=o.element.concat(e),o.element},o.emission.add("update",function(){w._("rAF")(function(){p(o.element,r)})}),r}function y(e){return"function"==typeof e&&"function"==typeof e.element}function v(e,t){var n,r=!1,o=t.split(".");return o.forEach(function(n,r,o){t=n,r<o.length-1&&(e=e[t])}),t in e&&(y(e[t])?r=e[t]:(n=Object.getOwnPropertyDescriptor(e,t),r=n.get)),r}function b(e,t){var n,r=w._("bindings")||[];if(!t){for(n=[e];n[n.length-1].parentNode;)n.push(n[n.length-1].parentNode);return r.filter(function(e){return n.indexOf(e.target)>=0}).map(function(e){return e.model}).filter(function(e,t,n){return t===n.indexOf(e)})}r.push({model:t,target:e}),w._("bindings",r)}var x=this,w=new t,T=new n,E=new r;x.defaults=function(e,t){return e&&w["public"](e,t),w["public"]()},x.ready=function(e){var t=w._("ready");return T.add("ready",e,1),void 0!==t&&T.trigger("ready",t!==!0?t:void 0),x},x.on=function(e,t){return T.add(e,t)},x.off=function(e,t){return T.remove(e,t)},x.extension=l,x.delegate=function(e){return m(e)},x.bind=function(){var e=s(arguments),t=h(e.shift()),n=e.length?e.pop():{};return"nodeType"in n&&(e.push(n),n={}),n=w.combine(n),e.length<=0&&e.push(document.body),e.forEach(function(e){b(e,t),(new i).find(n.attribute,e,function(e,n){c(n,function(n,r){var o=l(n);o(e,t,r,x)})}),(new o).placeholders(e,function(e){var r=e.nodeValue.substr(1,e.nodeValue.length-2).split(/:/),o=r.shift(),i=r.length?r.join(":"):"",u=v(t,o);u?(u.scope(t,o),u()||u(i)):n.greedy&&(u=m(i,t,o),f(t,o,!0,u,u)),u&&u.element(e)})}),t},x.bindings=function(e){return b(e||document.body)},u()}e.kontext=e.kontext||new u}(window),kontext.extension("attribute",function(e,t,n){"use strict";function r(n,r){t[r]?e.setAttribute(n,t[r]):e.hasAttribute(n)&&e.removeAttribute(n)}var o=Object.keys(n);t.on("update",function(e,t){o.forEach(function(e){n[e]===t&&r(e,t)})}),o.forEach(function(e){r(e,n[e])})}),kontext.extension("css",function(e,t,n){"use strict";function r(n,r){var o=!!t[r];"classList"in e?e.classList[o?"add":"remove"](n):e.className=e.className.replace(new RegExp("(?:^|\\s+)"+r+"(\\s+|$)"),function(e,t){return t||""})+(o?" "+n:"")}var o=Object.keys(n);t.on("update",function(e,t){o.forEach(function(e){n[e]===t&&r(e,t)})}),o.forEach(function(e){r(e,n[e])})}),kontext.extension("each",function(e,t,n){"use strict";function r(e){var r;return["map","filter"].forEach(function(o){o in n&&(r=n[o]instanceof Array?n[o]:[n[o]],r.forEach(function(n){if("function"==typeof t[n])e=e[o](t[n]);else{if("function"!=typeof window[n])throw new Error(n+" is not a "+o+" function");e=e[o](window[n])}}))}),e}function o(e){var t=l.filter(function(t){return t.item===e});return t.length?t[0]:null}function i(e){var r,i=o(e);return i||(r=f.map(function(e){return e.cloneNode(!0)}),i={item:e,model:kontext.bind.apply(kontext,["object"==typeof e?e:{}].concat(r)),nodes:r},i.model.$index=null,i.model.$item=e,i.model.$parent=t[n],l.push(i)),i}function u(e,t){return e.length!==t.length||0!==e.filter(function(e,n){return t[n]!==e}).length}function a(){var o,a=[],f=t[c],l=!1;if("object"==typeof n&&(f=r(f),o=!0),(!s||u(s,f))&&(s=f.slice(),l=!0),l||o){for(f.forEach(function(e,t){var n=i(e);n.model.$index=t,a=a.concat(n.nodes)});e.lastChild;)e.removeChild(e.lastChild);a.forEach(function(t){e.appendChild(t)})}}var c,s,f=[],l=[];if("object"==typeof n){if(c=n.target||!1,!c)throw new Error('Missing target for "each"')}else c=n;for(;e.firstChild;)f.push(e.removeChild(e.firstChild).cloneNode(!0));t.on("update",function(e,t){t===c&&a()}),a()}),kontext.extension("event",function(e,t,n){"use strict";function r(n,r,o){e.addEventListener(n,function(e){var n=t.delegation(r),i=n?n():!1;n&&("function"==typeof i?i.apply(null,[e,t,r,o]):n(o))},!1)}function o(e,t){"object"==typeof t?(t instanceof Array?t:Object.keys(t)).forEach(function(n){r(e,n,n in t?t[n]:void 0)}):r(e,t)}Object.keys(n).forEach(function(e){o(e,n[e])})}),kontext.extension("input",function(e,t,n){"use strict";function r(e){return e.hasAttribute("type")?e.getAttribute("type"):c.test(e.nodeName)?"select-"+(e.multiple?"multiple":"one"):"text"}function o(t){return t in s||(s[t]={model:function(){a(e[t])},element:function(n,r){e[t]=n[r]}}),s[t]}function i(){var r="default"in n?{value:null,label:n["default"]}:!1,o=function(){var o=0;"options"in n&&n.options in t&&(r&&(e.options[o]=new Option(r.label,r.value),++o),e.options.length=o,"object"==typeof t[n.options]&&(t[n.options]instanceof Array?t[n.options].forEach(function(t,n){"object"==typeof t?e.options[n+o]=new Option(t.label||t.value||"",t.value||""):e.options[n+o]=new Option(t)}):Object.keys(t[n.options]).forEach(function(r,i){e.options[i+o]=new Option(t[n.options][r],r)})))},i=function(t){var n;for(n=0;n<e.options.length;++n)t instanceof Array?e.options[n].selected=t.indexOf(e.options[n].value)>=0:e.options[n].selected=e.options[n].value===t},u="options"in n?t.delegation(n.options):!1,a="value"in n?t.delegation(n.value):!1,c=a?a():null;a&&(c instanceof Array?e.setAttribute("multiple",""):e.removeAttribute("multiple"),e.addEventListener("change",function(){var r,o;if(e.options.length)if(c instanceof Array)for(r=0;r<e.options.length;++r)e.options[r].selected&&t[n.value].indexOf(e.options[r].value)<0?t[n.value].push(e.options[r].value):!e.options[r].selected&&(o=t[n.value].indexOf(e[r].value))>=0&&t[n.value].splice(o,1);else a(e.options[e.selectedIndex].value)},!1),a.on("update",function(e,t){i(e[t])})),(u||a)&&(o(),i(c))}var u,a,c=/^select/i,s={};switch(r(e)){case"checkbox":case"radio":u="checked";break;case"select":case"select-one":case"select-multiple":i();break;default:u="value"}u&&(a=t.delegation(n[u]),a&&(e.addEventListener("input",o(u).model,!1),e.addEventListener("change",o(u).model,!1),a.on("update",o(u).element),e[u]=a()))}),kontext.extension("text",function(e,t,n){"use strict";var r=e.firstChild&&3===e.firstChild.nodeType?e.firstChild:document.createTextNode(t[n]),o=t.delegation(n);o&&(r.parentNode!==e&&r!==e.firstChild&&e.insertBefore(r,e.firstChild),o.element(r))});
//# sourceMappingURL=combined.min.js.map
