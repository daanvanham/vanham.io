kx.ready(function(){"use strict";function t(t){document.body.setAttribute("data-state","detail"===t?"small":"")}function e(){kx.ajax.get({url:r,success:function(t,e){kontext.bind({blogs:e.result},document.querySelector("body > section"))}})}function n(t,e){return 404===t?(history.replaceState(null,"","/"),void(window.location.href="/this-is-not-the-webpage-you-are-looking-for")):void 0}function a(e){i?Object.keys(e).forEach(function(t){i[t]=e[t]}):i=kontext.bind(e,document.querySelector('[data-view="detail"]')),t("detail"),setTimeout(function(){Prism.highlightAll()},50)}"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js");var i,o="v1",r="/api/"+o+"/blog",c={};"/"===window.location.pathname?(t("list"),e()):kx.ajax.get({url:r+window.location.pathname,success:function(t,n){a(n.result),e()},error:n}),kx.event.add("body > section","click","article a",function(t){var e=this,i=e.getAttribute("data-id");return t.preventDefault(),(!history.state||"id"in history.state&&history.state.id!==i)&&"/"===window.location.pathname&&history.pushState({id:i},"",e.href.replace(window.location.href,"")),i in c?a(c[i]):void kx.ajax.get({url:r+"/"+i,success:function(t,e){c[i]=Object.create(e.result),a(e.result)},error:n})}),kx.event.add("body > header a","click",function(e){e.preventDefault(),t("list"),history.pushState(null,"","/")}),kx.event.add("body","click",'[data-view="detail"] a:not([target])',function(t){var e=/(?:[a-z]+:)?\/\/(?:[a-z0-9_-]+\.)?([a-z][a-z0-9_-]+\.[a-z]{2,6})(?:\/.*)?|\/.*|javascript:.*/i,n=this.href.match(e),a=window.location.href.match(e);n&&n.length>1&&a&&a.length>1&&n[1]!==a[1]&&window.open(this.href)&&t.preventDefault()}),window.onpopstate=function(e){return e.state&&"object"==typeof e.state&&"id"in e.state?document.querySelector('article a[data-id="'+e.state.id+'"]').click():t("list")},window.addEventListener("error",function(t){ga("send","event","JavaScript Error",t.message,t.filename+": "+t.lineno)})}),function(){"use strict";!function(t,e,n,a,i,o,r){t.GoogleAnalyticsObject=i,t[i]=t[i]||function(){(t[i].q=t[i].q||[]).push(arguments)},t[i].l=1*new Date,o=e.createElement(n),r=e.getElementsByTagName(n)[0],o.async=1,o.src=a,r.parentNode.insertBefore(o,r)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-70511906-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")}();