kx.ready(function(){"use strict";function t(t){document.body.setAttribute("data-state","detail"===t?"small":"")}function e(){kx.ajax.get({url:r,success:function(t,e){kontext.bind({blogs:e.result},document.querySelector("body > section"))}})}function a(t,e){return 404===t?(history.replaceState(null,"","/"),void(window.location.href="/this-is-not-the-webpage-you-are-looking-for")):void 0}function i(e){n?Object.keys(e).forEach(function(t){n[t]=e[t]}):n=kontext.bind(e,document.querySelector('[data-view="detail"]')),t("detail"),setTimeout(function(){Prism.highlightAll()},50)}"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js");var n,o="v1",r="/api/"+o+"/blog",c={};"/"===window.location.pathname?(t("list"),e()):kx.ajax.get({url:r+window.location.pathname,success:function(t,a){i(a.result),e()},error:a}),kx.event.add("body > section","click","article a",function(t){var e=this,n=e.getAttribute("data-id");return t.preventDefault(),(!history.state||"id"in history.state&&history.state.id!==n)&&"/"===window.location.pathname&&history.pushState({id:n},"",e.href.replace(window.location.href,"")),n in c?i(c[n]):void kx.ajax.get({url:r+"/"+n,success:function(t,e){c[n]=Object.create(e.result),i(e.result)},error:a})}),kx.event.add("body > header a","click",function(e){e.preventDefault(),t("list"),history.pushState(null,"","/")}),kx.event.add("body","click",'[data-view="detail"] a:not([target])',function(t){var e=/(?:[a-z]+:)?\/\/(?:[a-z0-9_-]+\.)?([a-z][a-z0-9_-]+\.[a-z]{2,6})(?:\/.*)?|\/.*|javascript:.*/i,a=this.href.match(e),i=window.location.href.match(e);a&&a.length>1&&i&&i.length>1&&a[1]!==i[1]&&window.open(this.href)&&t.preventDefault()}),window.onpopstate=function(e){return e.state&&"object"==typeof e.state&&"id"in e.state?document.querySelector('article a[data-id="'+e.state.id+'"]').click():t("list")}}),function(){"use strict";!function(t,e,a,i,n,o,r){t.GoogleAnalyticsObject=n,t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},t[n].l=1*new Date,o=e.createElement(a),r=e.getElementsByTagName(a)[0],o.async=1,o.src=i,r.parentNode.insertBefore(o,r)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-70511906-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")}();